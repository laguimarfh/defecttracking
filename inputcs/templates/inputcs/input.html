{% extends 'inputcs/base.html' %}
{% load static %}

       


{% block content %}

{% with form=sheet_form %}
    {% include "inputcs/sheet_form.html" %}
{% endwith %}
  
{% block javascript %}

<script>
   

   var canvas;
   var ctx;
   var refImage;

   
   
   $(document).ready(function() {
     canvas = document.getElementById('drawing-canvas');
     ctx = canvas.getContext('2d');
     refImage = document.getElementById('reference-img');
     drawImageScaled(refImage, ctx);            
   
     $(canvas).click(function(e) {
       const offset = $(this).offset();
       const x = (e.pageX - offset.left) - 5;
       const y = (e.pageY - offset.top) + 10;
       ctx.font = '22px normal'
       ctx.fillStyle = 'red';
      
       if (ctx.fillText) {
         var answer = window.confirm("Save data?");
           if (answer) {
               ctx.fillText('X', x, y);
               $(canvas).off('click');//some code
             }
           else {
           context.clearRect(0, 0, canvas.width, canvas.height);
           }
         }
      
       {// $(canvas).click(function() { return false; }); // Adds another click event
      
     }
       // $(canvas).on('click.mynamespace', function() { /* Do stuff */ });
       // $(canvas).off('click.mynamespace');
       console.log(x)
       
       // console.log(x, y);
       document.getElementById('coorx').value = x;
       document.getElementById('coory').value = y;
     });
     
   });
   
   
   
   
   </script>
{% endblock %}   
      
       
                
{% endblock %}

